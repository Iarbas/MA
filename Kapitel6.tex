\chapter{Modellentwurf und Simulation}
Nach der sehr detaillreichen Analyse der Messwerte wird in diesem Kapitel ein Modell aus den aufbereiteten Daten gewonnen und dieses anschließend in eine Simulationsumgebung implementiert. Aus den Messungen muss zunächst qualitativ eine Aussage über das Verhalten der BLE-Signale getroffen werden, um nachfolgend ein geeignetes mathematisches Modell zu finden. Dieses gewählte Modell wird darauf an die Gegebenheiten mit einer Parameterschätzung angepasst. Für die Anpassung wird zunächst ein Minimierungsproblem anhand der Messwerte aus dem vorigen Kapitel erstellt, welches mit einem Partikel-Schwarm-Optimierer gelöst wird. Die daraus gewonnenen Parameter lassen sich in die Modellgleichung einsetzen, um mit dessen Hilfe die Signalausbreitung der Beacons in einem Gebäude vorherzusagen. \\ \\
Die Vorhersage der Aubreitung von BLE-Funkwellen in einer Simulation kann dazu genutzt werden, mithilfe von einem Optimierungsverfahren die Leuchtfeuer in einem Raum so anzubringen, dass ein Lokalisierungssystem aus dieser Technologie mit maximaler Genauigkeit konfiguriert werden kann. Um zuerst die Abmessungen des betreffenden Raumes zu ermitteln, wird der Grundriss durch die Verwendung des Scitos G5 und der Software Miracenter als Bilddatei erstellt. Somit gelten die Wände als Begrenzung und der verbleibende Rest als Platz für die Signalausbreitung. Die maximale Genauigkeit der Positionsbestimmung würde logischerweise erreicht werden, wenn der komplette Raum mit Beacons unter Einhaltung des Mindestabstandes übersäht wäre, was jedoch nicht ökonomisch ist. Deswegen wird zusätzlich die Anzahl der Beacons in die Problemformulierung mit eingearbeitet, sodass für jede mögliche Beacon-Anzahl eine optimale Konfiguration existiert. 
\section{Modellbildung}
Zunächst wird in diesem Abschnitt das zugrunde liegende Modell für das Verhalten der Signalausbreitung der Beacons bestimmt. Dazu wird aus Tabelle \ref{tab:Uebersicht} ein geeignetes Kanalmodell ausgesucht und dessen ungefährer Verlauf bestimmt. An diesem Verlauf wird es an den realen Messwerten validiert und anschließend in dessen Qualität durch die Parameterschätzung verbessert. Die genannten Modelle in der Tabelle können mit ihren Spezifikationen im Grunde alle als Ausbreitungsmodell für die Leuchtfeuer dienen. Jedoch fällt die erste Wahl auf das sogenannte WINNER II Modell, weil in dessen Beschreibung die Anwendung in großen Räume mit hohem Aufkommen von Datenverkehr steht. Und da eben diese Gegebenheit in den Messungen aus dem vorigen Kapitel vorhanden waren und für den späteren Einsatzorte (z.B. Kaufhäuser, Flugplätze etc.) der Beacon-Systeme gegeben sein werden, bietet sich dieses Modell besonders vor den anderen an. Zudem beträgt die Reichweite eines Beacons nur 70 Meter, wohingegen die Geltungsbereiche der anderen Modelle dafür überdimensioniert erscheinen.
\begin{table}[H]
\begin{tabular}{|m{1.6cm}|m{1.9cm}|m{1.7cm}|m{1.6cm}|m{3.1cm}|m{3.1cm}|}
\hline 
Modell & Antennen-höhen & Frequenz & Bereich & In-/Outdoor & Bemerkungen \\ \hline 
Free Space Loss & nicht begrenzt & $f\geq$30 MHz & LOS begrenzt & Indoor-Indoor- bzw. Outdoor-Outdoor-Übertragungen bei direkter Sichtverbindung (LOS) & Systeme, bei denen direkte Sichtverbindung angenommen werden kann \\ \hline 
Extended Hata & $h_1=$[1 m ; 10 m] $h_2=$[30 m ; 100 m] & 30 MHz -- 3GHz & $d\leq40$ km & automatisches Hinzuaddieren von Verlusten an Wänden bei Indoor-Outdoor- bzw. Indoor-Indoor Übertragungen (mehrere Räume/Gebäude) & mobile Dienste und andere Dienste, ohne direkte Sichtverbindung, nur im Bereich 2 -- 3 GHz implementiert \\ \hline 
Extended Hata-SRD & $h=$[1,5 m ; 3 m] & 30 MHz -- 3GHz & $d\leq0,3$ km & automatisches Hinzuaddieren von Verlusten an Wänden bei Indoor-Outdoor- bzw. Indoor-Indoor Übertragungen (mehrere Räume/Gebäude) & Kurzstrecken-verbindungen, bei denen wenigstens LOS angenommen werden kann \\ \hline 
WINNER II & $h\leq6$ m & 2 GHz -- 6GHz & $d=$[5 m ; 100 m] & Indoor-Indoor-Übertragungen bei LOS oder NLOS & Anwendung in großen offenen Räümen bei hohem Datenverkehr (z.B. Konferenzhalle, Fabrikgebäude) \\ \hline 
\end{tabular} 
\caption{Übersicht der Kanalmodelle im Indoor-Bereich, in Anlehung an \cite{Kanal}}
\label{tab:Uebersicht}
\end{table}
\subsection{Das WINNER II Modell}
Das WINNER II Modell \cite{WII}, benannt nach dem "`Wireless-World-Initiative-New-Radio"' (WINNER)-Konsortium, welches aus dem Zusammenschluss mehrerer Unternehmen besteht und die Verbesserung der Leistung von Mobilfunkkommunikationssystemen anstrebt, beinhaltet verschiedene Aspekte in der Berechnung von Ausbreitungsverlsuten. Die Formel die dem Modell zu Grunde liegt, beschreibt den Verlust einer Signalsstärke in Abhängigkeit zu einem zurückgelegten Weg folgendermaßen:
\begin{align*}
L_{WINNER}\left [ dBm \right ]=A\cdot log_{10}\left (d\left [ m \right ]\right ) + B + C\cdot log_{10}\left (\frac{f_c\left [ GHz \right ]}{5}\right )
\end{align*}
In der Formel steht $L_{WINNER}$ für den Leistungspegel in Dezibel Milliwatt (dBm), der das logarithmische Verhältnis aus einer Leistung in Form der Empfangsstärke im Vergleich zur anfänglichen Sendeleistung des Beacons angibt. So kann die obige Gleichung umgeschrieben werden zu:
\begin{align*}
10\cdot log_{10}\left (\frac{P_{Sendung}\left [ mW \right ]}{P_{Empfang}\left [ mW \right ]}\right )=A\cdot log_{10}\left (d\left [ m \right ]\right ) + B + C\cdot log_{10}\left (\frac{f_c\left [ GHz \right ]}{5}\right )
\end{align*}
oder auch direkt als dBm-Einheit formuliert werden:
\begin{align}
L_{Sendung}\left [ dBm \right ] - L_{Empfang}\left [ dBm \right ]=A\cdot log_{10}\left (d\left [ m \right ]\right ) + B + C\cdot log_{10}\left (\frac{f_c\left [ GHz \right ]}{5}\right ) \label{eq:WII}
\end{align}
Die Parameter der Gleichen bestehen primär aus einem Koeffizienten $A$, der die in der Luft zurückgelegte Strecke des Signals proportional gewichtet. Desweiteren fließen zum einen noch der additive Einfluss von dem Parameter $B$ für sonstige Störfaktoren und zum anderen der ebenfalls multiplikative Faktor $C$ zur Gewichtung des Ausbreitungsverlustes durch die Frequenz $f_c$ mit ein. In Abbildung \ref{fig:QualiWII} ist der qualitative Verlauf der Empfangsstärke, die nach oben hin abnimmt und der Distanz, welche nach rechts hinzunimmt, skizziert. Als Parameter wurden Werte aus der Fachliteratur \cite{Kanal} entnommen und in die Gleichung eingesetzt. Im Vergleich zu Abbildung \ref{fig:Mittelwert100} sieht der Funktionsverlauf weitgehend identisch aus, sodass nun mit der Parameterschätzung begonnen werden kann.  
\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{axis}[ymax=-40, xlabel={Distanz}, ylabel={Empfangsstärke}, width=0.5\paperwidth, height=0.2\paperheight, xtick = \empty, y dir=reverse, ytick = \empty, axis y line = left, axis x line = bottom, axis line style = {-latex}]
\addplot[domain=0.5:15, samples=100]{-(13.9*ln(x)+64.4+20*ln(2.4/5)+12)};
\end{axis}
\end{tikzpicture}
\caption{Qualitativer Verlauf des WINNER II-Modells}
\label{fig:QualiWII}
\end{figure}
\subsection{Parameterschätzung}
Um die qualitative Repräsentation des WINNER II-Modells in eine qualitative für die Beschreibung des Ausbreitungsverlustes von BLE-Signalen zu überführen, müssen die Parameter $A$, $B$ und $C$ dementsprechend angepasst werden. Die Gleichung aus \ref{eq:WII} vereinfacht dabei sich nochmals, wenn $f_c$ als konstant angenommen wird und die Ausdrücke aus $B$ und $C$ miteinander zu dem neuen Parameter $B^{\ast}$ zusammengefasst werden. Die Anpassung wird dabei in Form einer Optimierungsaufgabe vorgenommen, wobei es gilt die richtige Distanz anhand der RSSI-Werte zu schätzen. Im vorangegangenen Kapitel ergaben die Messungen, dass unter Betrachtung aller Daten es sehr schwierig ist eine genaue Vorhersage zu treffen. Deswegen wurden nur die stärksten 100 Signale einer Distanz gemittelt und diese Ergebnisse unter \ref{fig:Mittelwert100} vorgestellt. Die Durschnittswerte wurden anschließend zusammen mit den realen Distanzen in gleicher Reihenfolge der Länge $k$ in die zwei Vektoren $d_{real}\left ( k \right )$ und $RSSI\left ( k \right )$ gespeichert. Aus der Umstellung der Gleichung \ref{eq:WII} nach $d$ lässt sich aus dem empfangenen RSSI-Wert die geschätzte Entfernung bestimmen. Mit all diesen Informationen lässt sich ein Optimierungsproblem so formulieren, das eine zu minimierende Kostenfunktion $J$ als Differenz aus der direkt gemessenen Distanz von Beacon zu Smartphone zu der berechneten Distanz aufgefasst und durch deren folgende Quadrierung so eine parabolische Funktion erstellt wird. Die Quadrierung bewirkt, dass der Wert der Kostenfunktion von allen Seiten in Richtung des globalen Minimums abnimmt und somit das Optimierungsproblem einfacher zu lösen ist. 
\begin{align}
\underset{A,B^{\ast}}{min}\, J=\sum_{k=1}^{k_{end}}\left ( d_{real}\left ( k \right ) -10^{\frac{L_{Sendung} - RSSI\left ( k \right ) - B^{\ast}}{A}} \right )^{2} \label{eq:WIIOpti}
\end{align}
Als Lösungsalgorithmus für die Optimierung wird ein Partikel-Schwarm-Algorithmus (PSO) gewählt. Der Partikel-Schwarm-Optimierer ist ein Algorithmus mit einer künstlichen Intelligenz, die es zur Aufgabe hat eine Funktion zu minimieren bzw. zu maximieren. Es ist dabei einfacher sich die Partikel als einen Vogelschwarm vorzustellen. Der Grundgedanke dabei ist, dass mehreren Partikel ein zufälliger Startwert $p\left( t \right)$ im Suchraum unter Berücksichtigung der Gleichungsnebenbedingungen zugeordnet wird. D.h. im übertragenden Sinn, dass ein Vogelschwarm auf einer Wiese ausgesetzt wird. Ausgehend von diesem Startwert werden die einzelnen Vögel/Partikel im ersten Schritt in verschiedene Richtungen mit unterschiedlichen Geschwindigkeiten geschickt. Anschließend werden an den Zielpunkten die Kostenfunktionen mit den Positionen (oder auch Parametersätzen) berechnet und so der Funktionswert bestimmt. Die Schwarmintelligenz wird hierbei so realisiert, dass jedes Individuum seine aktuelle Position mit den zugehörigen Kosten kennt, sowie über die Position des Partikels mit den geringsten Kosten im ganzen Schwarm informiert wird. In Folge des Wissens um die beste Position, fliegen alle Vögel/Partikel in Richtung des lokalen Minimas und decken somit den gesamten Raum ab. \\ \\
Als Gleichung aufgefasst wird die Geschwindigkeit $v$ im nächsten Zeitschritt $t+1$ eines Partikels aus der alten Geschwindigkeit $v\left( t \right)$, aus den drei konstanten Gewichtungen $w$, $r_1$ und $r_2$, zwei Zufallszahlen $c_1$ und $c_2$ und verschiedenen Positionen berechnet. Die Positionen sind zum einen die aktuelle Position $x\left( t \right)$, die mit den besten Kosten des einzelnden Individuums $p$ und die Position der geringsten Kosten im ganzen Schwarm $g$. Im ganzen lauten die Gleichungen zur Bestimmung des nächsten Punktes \cite{PSO}:
\begin{align}
v\left( t+1 \right)&=\left( w\cdot v\left( t \right) \right) + \left( c_1\cdot r_1\cdot \left( p - x\left( t \right) \right) \right) + \left( c_2\cdot r_2\cdot \left( g - x\left( t \right) \right) \right) \\
x\left( t+1 \right)&=x\left( t \right) + v\left( t+1 \right)
\end{align}
Der Vorteil dieses Verfahrens ist es, dass der komplette Suchraum abgetastet wird und durch die Intelligenz des Schwarms die Parametersätze mit den geringsten Kosten identifiziert werden. Der Nachteil ist der relativ hohe Rechenaufwand im Gegensatz zu anderen Verfahren (z.B. Newton, Trust-Region, Simplex etc.), zumal kein besseres Ergebnis mit dem PSO für ein solches Problem zu erwarten wäre. Jedoch baut der Erweiterte Partikel-Schwarm-Optimierer in dem nächsten Abschnitt auf dem PSO auf, sodass in diesem Teil der Arbeit die Vorstellung der einfachen Variante sich geradezu anbietet.\\ \\
Als Ergebnis der Parameterschätzung wurden in Abbildung \ref{fig:WIISauelengraph} zunächst die berechneten RSSI-Werte für die jeweiligen Distanzen im Vergleich zu den gemmesenen Mittelwerte aller drei Beacons gegenübergestellt. Wie schon in der Analyse der Messwerte kritisiert, entspricht das Verhalten des Ausbreitungsverlustes ab dem zehnten Meter nicht mehr der theoretischen Annahme. Während der Verlauf vom ersten Abschnitt sehr gut geschätzt werden kann, versagt aber das einfache WINNER II-Modell bei größeren Distnazen. Ähnlich verhält es sich bei der Schätzung der Entfernung, wie Abbildung \ref{fig:WIIDistance} zeigt. Hier wurde das Modell lediglich nach $d$ umgestellt und als Eingabe dienten die Mittelwerte aus \ref{fig:WIISauelengraph}. In Tabelle \ref{tab:Parameterwerte} sind die Parameter aus der Optimierung aufgeführt, welche in das Modell zur Berechnung der letzten Diagramme eingesetzt wurden. 
\begin{figure}[H] 
\centering
\begin{tikzpicture}
\begin{axis}[ybar, bar width=1.5mm, xlabel={Abstand der einzelnen Beacons in Metern}, ylabel={Gemittelter RSSI-Wert in dBm}, width=0.7\paperwidth, height=0.2\paperheight, y dir=reverse, legend style={at={(0.25,1.15)}, anchor=south, legend columns=5, /tikz/every even column/.append style={column sep=0.2cm}}, enlarge y limits=false, enlarge x limits=false, ymin=-90,ymax=-60, xmin=0.3,xmax=15.7]
\addplot+[fill=dblue] table [col sep=comma] {TikzDaten/WIISauelengraph.dat}; 
\legend{Mittelwert aller drei Beacons}
\end{axis}
\begin{axis}[xtick = \empty, ytick = \empty, width=0.7\paperwidth, height=0.2\paperheight, y dir=reverse, legend style={at={(0.75,1.15)}, anchor=south, legend columns=5, /tikz/every even column/.append style={column sep=0.2cm}}, enlarge y limits=false, enlarge x limits=false, ymin=-90,ymax=-60, xmin=0.3,xmax=15.7]
\addplot+[mark=none,red,very thick] table [col sep=comma] {TikzDaten/WIIRSSI.dat};
\legend{geschätzter RSSI-Wert};
\end{axis}
\end{tikzpicture}
\caption{Durschnittlicher RSSI-Werte im Vergleich zum berechneten RSSI-Wert aus dem WINNER II-Modell über die einzelnen Entfernungen}
\label{fig:WIISauelengraph}
\end{figure}
\begin{figure}[H] 
\centering
\begin{tikzpicture}
\begin{axis}[xlabel={Reale Distanz in Meter},ylabel={Geschätzte Distanz in Meter},width=0.7\paperwidth, height=0.25\paperheight, enlarge y limits=0.01, enlarge x limits=false, xmin=0.3,xmax=15.7, legend pos=north west]
\addplot+[red,mark=*,semithick] table [col sep=comma] {TikzDaten/WIIdberech.dat}; 
\addplot+[mark=none,blue,very thick] table [col sep=comma] {TikzDaten/DisrealOptimum.dat};
\legend{geschätzter Wert,optimaler Verlauf};
\end{axis}
\end{tikzpicture}
\caption{Vergleich der Distanz-Schätzung mit dem WINNER II-Modell zur gemessenen Entfernung}
\label{fig:WIIDistance}
\end{figure}
\begin{table}[H]
\begin{center}
\begin{tabular}{|c|c|c|}
\cline{2-3}
\multicolumn{1}{c|}{} & \multicolumn{2}{c|}{Parameter} \\
\cline{2-3}
\multicolumn{1}{c|}{} & $A$ & $B^{\ast}$ \\
\hline
\multirow{1}{*}{Wert} & $16,2623$ & $55,1046$ \\
\hline
\end{tabular}
\end{center}
\caption{Werte der Parameter}
\label{tab:Parameterwerte}
\end{table} 
\section{Vertrauens-Skala}
Im Hinblick auf die verschiedenen Betriebsmodi der Beacons, den unterschiedlichen Arten der Positionsbestimmung (Landmarkensystem und Mikro-Lokalisierung) und vielen noch nicht vorgestellten Techniken mit denen sich die Vorhersage der Position bestimmen und verbessern lassen, fällt es sehr schwer die Güte der Leuchtfeuer-Signale einzuschätzen. Mit Güte soll gemeint sein, inwieweit dem Modell \ref{eq:WII} vertraut wird die aktuelle Position zu schätzen und wie genau diese Schätzung in Metern oder Zentimetern erfasst werden kann. Um unabhängig von der Art der Lokalisierung, dem Anwendungsbereich und den eingesetzten Techniken die Güte angeben zu können, wird lediglich die Wahrscheinlichkeit mit dem WINNER II-Modell die tatsächliche Distanz zu ermitteln, als Wert dafür angenommen. D.h. aus den Messungen der RSSI-Werte vom vorigen Kapitel werden diesesmal alle Daten für die Distanzberechnung herangezogen und mit einer Toleranz versehen. Die berechneten Entfernungen werden darauf mit realen Distanzen verglichen und im Falle, dass sie sich nur in einem definierten Spielraum voneinander unterscheiden, wird dies als eine erfolgreiche Positionsbestimmung angesehen. Der prozentuale Anteil aller erfolgreichen Berechnungen wird so als Gütemaß gewertet und somit wird Qualität der Beacon-Signale als eine statistische Wahrscheinlichkeit, des Empfanges einer für das Modell geeigneten Signalsstärke pro Messung, aufgefasst. Die Ergebnisse aus diesen Überlegungen finden sich in Abbildung \ref{fig:GueteSauelengraph05} und \ref{fig:GueteSauelengraph2} wieder. Sie zeigen einmal die Wahrscheinlichkeit $W_{berech}$ ein gültiges Signal zu empfangen bei einer Toleranz von $0,5$ und bei $2$ Metern, wobei die dazugehörigen festen Distanzen die jeweiligen gemittelten drei Messreihen $d_{mitt}$ darstellen. Zudem wurde versucht die Güte als Funktion zu charakterisieren. Dazu wurde die Funktion \ref{eq:Umkehrfunktion} aufgrund ihrer Art ausgewählt und um weitere Parameter erweitert \ref{eq:eUmkehrfunktion}, welche schließlich durch die Lösung des Minimierungsproblems\ref{eq:OptiUmkehrfunktion} und unter der Verwendung vom PSO bestimmt wurden (Ergebnis siehe Tabelle \ref{tab:ParameterwerteGuete}).
\begin{align}
W_{berech}&=\frac{1}{d_{mitt}+1} \label{eq:Umkehrfunktion}\\
W_{berech}&=\frac{1}{p_1\cdot d_{mitt}+p_2} + p_3 \label{eq:eUmkehrfunktion}\\
\underset{p_1,p_2,p_3}{min}\, J&=\sum_{k=1}^{k=15}\left ( W_{real}\left ( k \right ) - W_{berech} \right )^{2} \label{eq:OptiUmkehrfunktion} \\
\end{align}
\begin{table}[H]
\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\cline{3-5}
\multicolumn{2}{c|}{} & \multicolumn{3}{c|}{Parameter} \\
\cline{3-5}
\multicolumn{2}{c|}{} & $p_1$ & $p_2$ & $p_3$ \\
\hline
\multirow{2}{*}{Toleranz} & $0,5$ m & $3,3777$ & $-0,6746$ & $0.0163$\\
\cline{2-5}
& $2$ m & $0,2035$ & $0,7145$ & $0,1594$\\
\hline
\end{tabular}
\end{center}
\caption{Werte der Parameter}
\label{tab:ParameterwerteGuete}
\end{table} 
Der Vorteil dieser Betrachtweise liegt in den Funktionen der Beacons, da hier die Frequenz bzw. Häufigkeit der Sendevorgänge eingestellt werden kann. Durch die Erhöhung der ubertragungen pro Sekunde lässt sich somit die Zeit verringern, bis ein gültiges Signal das Messgerät erreicht. Anhand dieser Einstellmöglichkeiten lässt sich zusammen mit der hier vorgestellten Skala die Dynamik der Messungen beeinflussen. 
\begin{figure}[H] 
\centering
\begin{tikzpicture}
\begin{axis}[ybar, bar width=1.5mm, xlabel={Abstand der einzelnen Beacons in Metern}, ylabel={Wahrscheinlichkeit}, width=0.7\paperwidth, height=0.2\paperheight, legend style={at={(0.25,1.15)}, anchor=south, legend columns=5, /tikz/every even column/.append style={column sep=0.2cm}}, enlarge y limits=false, enlarge x limits=false, ymin=0,ymax=1, xmin=0.3,xmax=15.7]
\addplot+[fill=dblue] table [col sep=comma] {TikzDaten/GueteSauelengraph05.dat}; 
\legend{gemessener Durschnittswert}
\end{axis}
\begin{axis}[xtick = \empty, ytick = \empty, width=0.7\paperwidth, height=0.2\paperheight, legend style={at={(0.75,1.15)}, anchor=south, legend columns=5, /tikz/every even column/.append style={column sep=0.2cm}}, enlarge y limits=false, enlarge x limits=false, ymin=0,ymax=1, xmin=0.3,xmax=15.7]
\addplot+[mark=none,red,very thick] table [col sep=comma] {TikzDaten/GueteOpit05.dat};
\legend{Approximation};
\end{axis}
\end{tikzpicture}
\caption{Wahrscheinlichkeit des Empfangs gültiger Signale in einem Toleranzbereich von $0,5$ Metern und dessen Approximation}
\label{fig:GueteSauelengraph05}
\end{figure} 
\begin{figure}[H] 
\centering
\begin{tikzpicture}
\begin{axis}[ybar, bar width=1.5mm, xlabel={Abstand der einzelnen Beacons in Metern}, ylabel={Wahrscheinlichkeit}, width=0.7\paperwidth, height=0.2\paperheight, legend style={at={(0.25,1.15)}, anchor=south, legend columns=5, /tikz/every even column/.append style={column sep=0.2cm}}, enlarge y limits=false, enlarge x limits=false, ymin=0,ymax=1, xmin=0.3,xmax=15.7]
\addplot+[fill=dblue] table [col sep=comma] {TikzDaten/GueteSauelengraph2.dat}; 
\legend{gemessener Durschnittswert}
\end{axis}
\begin{axis}[xtick = \empty, ytick = \empty, width=0.7\paperwidth, height=0.2\paperheight, legend style={at={(0.75,1.15)}, anchor=south, legend columns=5, /tikz/every even column/.append style={column sep=0.2cm}}, enlarge y limits=false, enlarge x limits=false, ymin=0,ymax=1, xmin=0.3,xmax=15.7]
\addplot+[mark=none,red,very thick] table [col sep=comma] {TikzDaten/GueteOpit2.dat};
\legend{Approximation};
\end{axis}
\end{tikzpicture}
\caption{Wahrscheinlichkeit des Empfangs gültiger Signale in einem Toleranzbereich von $2$ Metern und dessen Approximation}
\label{fig:GueteSauelengraph2}
\end{figure} 
\section{Entwicklung der Simulationsumgebung}
Mit den gewonnen Erkenntnissen aus der Modellierung können nun Vorhersagen über die Signalausbreitung und der Genauigkeit von Beacons getroffen werden, die schließlich zu einer optimalen Planung eines Indoor-Lokalisierungssystems genutzt werden können. Dazu wird zunächst eine Entwicklungsumgebung zur Herstellung der Simulation benötigt. Als Basis der Simulation wird eine grafische Oberfläche (GUI) mit dem Editor GUIDE aus dem Programm MATLAB \cite{GUIDE} erstellt. In dieser Sektion werden die einzelnen Funktionen der GUI besprochen und deren Verarbeitungskette vorgestellt. Hierfür wird als erstes auf die Konvertierung der Zeichnung eines Grundrisses (als PNG-Bilddatei) in verarbeitbare Informationen eingegangen, welche von substantieller Bedeutung für den gesamten Simulations-Prozess sind. Anschließend kann darauf aufbauend die eigentliche Implementierung begonnen werden. Hierbei wird speziell der Aspekt einer optimalen Verteilung, unter besonderer Betrachtung der Vertrauens-Skala, aufgegriffen. Eigens dafür wurde der vorher vorgestellte Partikel-Schwarm-Algorithmus aus der Parameterschätzung erweitert, sodass er auch für den abstrakten Fall einer Anordnung von Funkbaken eingesetzt werden kann. Abschließend wird auf einen fiktiver Raum das komplette Lighthouse Keeper-Prinzip einmal dargestellt.  
\subsection{Grundrissanalyse}

Erst wie ist das Bild aufgenommen, dann wie werden wände und der gültige Raum identifiziert, dann die fehlerkorrekturen. Bewertungssystem beschreiben. Dann die Umrechnung von Pixeln in Meter. Dann die Zusammenfassung in Polygonen (um später vereinfacht Signale im LOS oder NLOS ausfindig zu machen). Dann die Aufteilung des Raumes in einzelne Elemente, deren Größe angegeben werden kann und bestimmung ihrer Mittelpunkte. Dann die Positionierung der Beacon-Befestigungen im Mindestabstand.
Vorgehensweise beim Einlesen des Bildes
\input{GrundAnaly}

%\subsection{Manuelle Planung}
%Hier noch die manuelle Eingabe zeigen.
%\subsection{Optimierung}
%Hier spielt wieder die Richterskala, bzw. ihre definierte Güte mit ein.
%\subsubsection{Erweiterter Partikel-Schwarm-Algorithmus}
%Erklärung warum gerade ein genetischer Algorithmus. 
%\subsubsection{Paretofront}
%Auswahl eines Optimierungsergebnisses anhand von der Kalkulation Anzahl Beacons -> gewünschte Genauigkeit/Abdeckung
%\subsection{Simulation}
%Hier noch erwähnen, dass die Intervalllänge die Zeit verkürzt, bis die Wahrscheinlichkeiten zur optimalen lösung auftreten. Außerdem konnte die Sendeleistung der Beacons nicht genau übrprüft werden, weil nicht ausreichend Platz für die Experimente gegeben war. Hier müssten neue Versuche unternommen werden.